(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1464],{94961:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/articles/categories/[edit_category]/[id]",function(){return t(63504)}])},63504:function(e,l,t){"use strict";t.r(l);var i=t(85893),n=t(86886),a=t(66242),d=t(26447),r=t(50135),s=t(94054),c=t(33841),o=t(153),u=t(18972),h=t(78445),_=t(83321),g=t(11163),p=t(67294),v=t(50689),x=t(11466),j=t(5152),y=t.n(j),Z=t(84475),f=t(7295),m=t(19358),b=t(49824);let w=y()(()=>Promise.all([t.e(4645),t.e(8208)]).then(t.bind(t,54645)),{loadableGenerated:{webpack:()=>[54645]},ssr:!1}),C=()=>{var e,l;let{setModal:t}=(0,f.d)(),{themeMode:x}=(0,v.K$)(),{user:j}=(0,m.E)(),y=(0,g.useRouter)(),[C,k]=(0,p.useState)(!0),[q,E]=(0,p.useState)({post_category_title:"",parent_id:null===(e=y.query)||void 0===e?void 0:e.parent_id,is_able_user_add:0,post_category_type:0,post_category_read_type:0});(0,p.useEffect)(()=>{F()},[]);let F=async()=>{var e;if((null===(e=y.query)||void 0===e?void 0:e.edit_category)=="edit"){let e=await (0,b.fp)("post-categories","get",{id:y.query.id});e&&(!(null==e?void 0:e.children.length)>0&&L("add-children","하위 카테고리가 필요하면 '추가' 버튼을 클릭하여 하위 카테고리를 추가해 주세요."),E(e))}k(!1)},P=async()=>{let e;if((null===(l=y.query)||void 0===l?void 0:l.edit_category)=="edit"){for(var l,t,i,n=0;n<(null==q?void 0:q.children.length);n++)(null===(t=null==q?void 0:q.children[n])||void 0===t?void 0:t.id)?(null===(i=null==q?void 0:q.children[n])||void 0===i?void 0:i.is_edit)&&await (0,b.fp)("post-categories","update",{...null==q?void 0:q.children[n]}):await (0,b.fp)("post-categories","create",null==q?void 0:q.children[n]);e=await (0,b.fp)("post-categories","update",q)}else e=await (0,b.fp)("post-categories","create",q);e&&(Z.Am.success("성공적으로 저장 되었습니다."),window.location.href="/manager/articles/categories")},[N,O]=(0,p.useState)(!1),[S,X]=(0,p.useState)([]),L=(e,l)=>{X([{selector:".".concat(e),content:l}]),O(!0)},R=()=>{O(!1),X([])};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{steps:S,isOpen:N,disableInteraction:!1,onRequestClose:R}),!C&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(n.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(n.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(a.Z,{sx:{p:2,height:"100%"},children:(0,i.jsxs)(d.Z,{spacing:3,children:[(0,i.jsx)(r.Z,{label:"카테고리명",placeholder:"ex) 공지사항",value:q.post_category_title,onChange:e=>{E({...q,post_category_title:e.target.value})}}),(null==j?void 0:j.level)>=50&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(c.Z,{children:"유저 추가 가능여부"}),(0,i.jsxs)(o.Z,{label:"유저 추가 가능여부",value:q.is_able_user_add,onChange:e=>{E({...q,is_able_user_add:e.target.value})},children:[(0,i.jsx)(u.Z,{value:0,children:"가능 X"}),(0,i.jsx)(u.Z,{value:1,children:"가능 O"})]})]})}),(null==j?void 0:j.level)>=50&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(c.Z,{children:"볼수 있는 대상"}),(0,i.jsxs)(o.Z,{label:"볼수 있는 대상",value:q.post_category_read_type,onChange:e=>{E({...q,post_category_read_type:e.target.value})},children:[(0,i.jsx)(u.Z,{value:0,children:"모두"}),(0,i.jsx)(u.Z,{value:1,children:"자신 및 관리자만"})]})]})}),(null==j?void 0:j.level)>=50&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(c.Z,{children:"게시물 카테고리 타입"}),(0,i.jsxs)(o.Z,{label:"게시물 카테고리 타입",value:q.post_category_type,onChange:e=>{E({...q,post_category_type:e.target.value})},children:[(0,i.jsx)(u.Z,{value:0,children:"일반형"}),(0,i.jsx)(u.Z,{value:1,children:"갤러리형"})]})]})})]})})}),(null===(l=y.query)||void 0===l?void 0:l.edit_category)=="edit"&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(a.Z,{sx:{p:2,height:"100%"},children:(0,i.jsxs)(d.Z,{spacing:3,children:[(0,i.jsx)(h.Z,{title:"하위 카테고리",sx:{padding:"0"}}),(null==q?void 0:q.children)&&(null==q?void 0:q.children.map((e,l)=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.Z,{label:"카테고리명",placeholder:"ex) 문의",value:null==e?void 0:e.post_category_title,defaultValue:null==e?void 0:e.post_category_title,onChange:e=>{let t=[...null==q?void 0:q.children];t[l].post_category_title=e.target.value,t[l].is_edit=!0,E({...q,children:t})}})}))),(0,i.jsx)(_.Z,{variant:"contained",style:{height:"56px"},className:"add-children",onClick:()=>{var e;let l=[...null==q?void 0:q.children];l.push({...q,id:void 0,post_category_title:"",parent_id:null===(e=y.query)||void 0===e?void 0:e.id}),E({...q,children:l}),R()},children:"+ 추가"})]})})})}),(0,i.jsx)(n.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(a.Z,{sx:{p:3},children:(0,i.jsx)(d.Z,{spacing:1,style:{display:"flex"},children:(0,i.jsx)(_.Z,{variant:"contained",style:{height:"48px",width:"120px",marginLeft:"auto"},onClick:()=>{t({func:()=>{P()},icon:"material-symbols:edit-outline",title:"저장 하시겠습니까?"})},children:"저장"})})})})]})})]})};C.getLayout=e=>(0,i.jsx)(x.Z,{children:e}),l.default=C}},function(e){e.O(0,[3662,3548,8203,9421,5422,153,135,6886,1664,7273,8422,7422,2961,7720,3664,9456,1466,9774,2888,179],function(){return e(e.s=94961)}),_N_E=e.O()}]);