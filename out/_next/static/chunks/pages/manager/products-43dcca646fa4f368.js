(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2507],{13610:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/products",function(){return n(86835)}])},86835:function(e,t,n){"use strict";n.r(t);var l=n(73849);t.default=l.default},73849:function(e,t,n){"use strict";n.r(t);var l=n(85893),i=n(15861),a=n(153),o=n(18972),r=n(93946),d=n(26447),c=n(66242),u=n(67720),s=n(83321),_=n(67294),v=n(11466),g=n(13380),h=n(1954),p=n(11163),m=n(65631),x=n(17543),j=n(72679),y=n(25853),b=n(19755),f=n.n(b),Z=n(7295),w=n(50689),C=n(49824),F=n(19358);let k=()=>{var e,t,n;let{user:v}=(0,F.E)(),{setModal:b}=(0,Z.d)(),{themeCategoryList:k,themeDnsData:S}=(0,w.K$)(),E=[{id:"id",label:"No.",action:e=>{var t;return(0,x.D9)(null!==(t=e.id)&&void 0!==t?t:"---")}},{id:"product_img",label:"상품이미지",action:e=>{var t;return e.product_img?(0,l.jsx)("div",{style:{minWidth:"100px"},children:(0,l.jsx)(j.LazyLoadImage,{src:null!==(t=e.product_img)&&void 0!==t?t:"---",style:{height:"84px",width:"auto"}})}):"---"}},{id:"product_code",label:"상품코드",action:e=>{var t;return null!==(t=e.product_code)&&void 0!==t?t:"---"}},{id:"product_name",label:"상품명",action:e=>{var t;return null!==(t=e.product_name)&&void 0!==t?t:"---"}},...k.map((e,t)=>({id:"category_group_".concat(null==e?void 0:e.id),label:"".concat(null==e?void 0:e.category_group_name),action:e=>(0,l.jsx)(l.Fragment,{children:e["category_root_".concat(t)]&&e["category_root_".concat(t)].length>0?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.X2,{children:e["category_root_".concat(t)].map((n,i)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{marginRight:"0.25rem"},children:n.category_name}),i!=e["category_root_".concat(t)].length-1&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{marginRight:"0.25rem"},children:">"})})]}))})}):(0,l.jsx)(l.Fragment,{children:"---"})})})),{id:"product_price",label:"상품가",action:e=>(0,x.D9)(e.product_price)},{id:"product_sale_price",label:"상품 할인가",action:e=>(0,x.D9)(e.product_sale_price)},{id:"user_name",label:"생성한유저아이디",action:e=>{var t;return null!==(t=e.user_name)&&void 0!==t?t:"---"}},{id:"seller_name",label:"생성한유저셀러명",action:e=>{var t;return null!==(t=e.seller_name)&&void 0!==t?t:"---"}},...(null==S?void 0:null===(e=S.setting_obj)||void 0===e?void 0:e.is_use_consignment)==1?[{id:"consignment",label:"위탁자정보",action:e=>(0,l.jsxs)(m.JX,{children:[(null==e?void 0:e.product_type)==0&&(0,l.jsx)(l.Fragment,{children:"---"}),(null==e?void 0:e.product_type)==1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{variant:"subtitle2",children:"유저아이디"}),(0,l.jsx)(i.Z,{variant:"body2",children:null==e?void 0:e.consignment_user_name}),(0,l.jsx)(i.Z,{variant:"subtitle2",children:"유저휴대폰번호"}),(0,l.jsx)(i.Z,{variant:"body2",children:null==e?void 0:e.consignment_user_phone_num})]}),(null==e?void 0:e.product_type)==2&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{variant:"subtitle2",children:"비회원판매자명"}),(0,l.jsx)(i.Z,{variant:"body2",children:null==e?void 0:e.consignment_none_user_name}),(0,l.jsx)(i.Z,{variant:"subtitle2",children:"비회원판매자연락처"}),(0,l.jsx)(i.Z,{variant:"body2",children:null==e?void 0:e.consignment_none_user_phone_num})]})]})}]:[],{id:"status",label:"상태",action:e=>(0,l.jsxs)(a.Z,{size:"small",defaultValue:null==e?void 0:e.status,onChange:t=>{B(null==e?void 0:e.id,t.target.value)},children:[(0,l.jsx)(o.Z,{value:0,children:"판매중"}),(0,l.jsx)(o.Z,{value:1,children:"중단됨"}),(0,l.jsx)(o.Z,{value:2,children:"품절"}),(0,l.jsx)(o.Z,{value:3,children:"새상품"})]}),sx:e=>({color:"".concat((null==e?void 0:e.is_cancel)==1?"red":"")})},{id:"order_count",label:"주문",action:e=>(0,x.D9)(e.order_count)},{id:"review_count",label:"리뷰",action:e=>(0,x.D9)(e.review_count)},{id:"created_at",label:"생성시간",action:e=>{var t;return null!==(t=e.created_at)&&void 0!==t?t:"---"}},{id:"updated_at",label:"최종수정시간",action:e=>{var t;return null!==(t=e.updated_at)&&void 0!==t?t:"---"}},{id:"edit",label:"리뷰 확인하기",action:e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.Z,{onClick:()=>{D.push("edit/".concat(null==e?void 0:e.id,"?type=1"))},children:(0,l.jsx)(h.JO,{icon:"ic:outline-rate-review"})})})},{id:"edit",label:"수정/삭제",action:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{children:(0,l.jsx)(h.JO,{icon:"material-symbols:edit-outline",onClick:()=>{D.push("edit/".concat((null==e?void 0:e.product_code)||(null==e?void 0:e.id)))}})}),(0,l.jsx)(r.Z,{onClick:()=>{b({func:()=>{$(null==e?void 0:e.id)},icon:"material-symbols:delete-outline",title:"정말 삭제하시겠습니까?"})},children:(0,l.jsx)(h.JO,{icon:"material-symbols:delete-outline"})})]})}],D=(0,p.useRouter)(),[N,O]=(0,_.useState)([]),[X,L]=(0,_.useState)({}),[J,z]=(0,_.useState)({page:1,page_size:10,s_dt:"",e_dt:"",search:"",category_id:null,seller_id:(null==v?void 0:v.level)==10?null==v?void 0:v.id:-1}),[P,R]=(0,_.useState)([]),[T,G]=(0,_.useState)({}),[I,K]=(0,_.useState)({});(0,_.useEffect)(()=>{V()},[]);let V=async()=>{O(E),W({...J,page:1})},W=async e=>{L({...X,content:void 0});let t=await (0,C.fp)("products","list",e);if(t){for(var n=0;n<k.length;n++){let e=await (0,x.XG)(null===(l=k[n])||void 0===l?void 0:l.product_categories);for(var l,i,a=0;a<t.content.length;a++){let l=t.content[a],o=await q(null!==(i=l["category_id".concat(n)])&&void 0!==i?i:0,e);(null==o?void 0:o.length)>0&&(t.content[a]["category_root_".concat(n)]=null!=o?o:[])}}L(t)}z(e)},$=async e=>{await (0,C.fp)("products","delete",{id:e})&&W(J)},q=async(e,t)=>{let n=[];for(var l,i=0;i<t.length;i++)if((null===(l=t[i][t[i].length-1])||void 0===l?void 0:l.id)==e){n=t[i];break}return n},A=(e,t,n)=>{let l=(0,x.XG)(null===(a=k[n])||void 0===a?void 0:a.product_categories),i=[];for(var a,o,r,d,c=0;c<l.length;c++)if((null===(o=l[c][t])||void 0===o?void 0:o.id)==(null==e?void 0:e.id)){i=l[c];break}let u={},s={...T,[n]:i};for(var c=0;c<k.length;c++)s[c]&&(u["category_id".concat(c)]=null===(r=s[c][s[c].length-1])||void 0===r?void 0:r.id);W({...J,...u,page:1}),G(s);let _=[];for(var c=0;c<i.length;c++)_.push(null===(d=i[c])||void 0===d?void 0:d.children);K({...I,[n]:_}),f()(".category-container-".concat(n)).scrollLeft(1e5)},B=async(e,t)=>{await (0,C.m8)("products/status","update",{id:e,value:t})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d.Z,{spacing:3,children:(0,l.jsxs)(c.Z,{children:[k.map((e,i)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{width:"100%",padding:"0.75rem"},children:(0,l.jsx)(y.SelectCategoryComponent,{curCategories:null!==(t=T[i])&&void 0!==t?t:[],categories:null==e?void 0:e.product_categories,categoryChildrenList:null!==(n=I[i])&&void 0!==n?n:[],onClickCategory:A,noneSelectText:"".concat(null==e?void 0:e.category_group_name," 전체"),sort_idx:i})})})),(0,l.jsx)(u.Z,{}),(0,l.jsx)(g.Z,{data:X,setData:L,columns:N,searchObj:J,onChangePage:W,add_button_text:"상품 추가",want_move_card:!0,table:"products",detail_search:(0,l.jsx)(s.Z,{variant:"outlined",children:"상세검색"})})]})})})};k.getLayout=e=>(0,l.jsx)(v.Z,{children:e}),t.default=k}},function(e){e.O(0,[3662,3548,8203,9421,5422,153,135,6886,1664,7273,8422,7422,2961,7720,8282,2077,5054,8873,7516,2519,1440,2418,9456,1466,2367,7026,9774,2888,179],function(){return e(e.s=13610)}),_N_E=e.O()}]);