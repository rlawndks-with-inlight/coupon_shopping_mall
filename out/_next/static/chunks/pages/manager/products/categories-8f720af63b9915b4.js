(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6240],{66242:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var i=t(87462),l=t(63366),r=t(67294),a=t(86010),o=t(94780),s=t(90948),d=t(71657),c=t(90629),u=t(1588),h=t(34867);function x(e){return(0,h.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var g=t(85893);let m=["className","raised"],j=e=>{let{classes:n}=e;return(0,o.Z)({root:["root"]},x,n)},p=(0,s.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"})),f=r.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiCard"}),{className:r,raised:o=!1}=t,s=(0,l.Z)(t,m),c=(0,i.Z)({},t,{raised:o}),u=j(c);return(0,g.jsx)(p,(0,i.Z)({className:(0,a.Z)(u.root,r),elevation:o?8:void 0,ref:n,ownerState:c},s))});var v=f},45475:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/products/categories",function(){return t(16226)}])},16226:function(e,n,t){"use strict";t.r(n);var i=t(82729),l=t(85893),r=t(13033),a=t(67294),o=t(50066),s=t(90948),d=t(41796),c=t(4707),u=t(25254),h=t(4020),x=t(76409),g=t(34386),m=t(15861),j=t(93946),p=t(86886),f=t(66242),v=t(83321),Z=t(26447),y=t(50135),_=t(65631),C=t(82367),w=t(86010),F=t(1954),b=t(52443),k=t(17543),N=t(86745),P=t(7295);function S(){let e=(0,i._)(["\nwidth:100%;\ndisplay:flex;\n"]);return S=function(){return e},e}let O=(0,s.ZP)(c.Z)({height:240,flexGrow:1,maxWidth:400}),R=(0,s.ZP)(e=>(0,l.jsx)(u.Z,{...e}))(e=>{let{theme:n}=e;return{["& .".concat(h.Z.iconContainer)]:{"& .close":{opacity:.3},height:"auto"},["& .".concat(h.Z.group)]:{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,d.Fq)(n.palette.text.primary,.4))}}}),E=(0,a.forwardRef)(function(e,n){let{classes:t,className:i,label:r,nodeId:o,icon:s,expansionIcon:d,displayIcon:c,depth:u,category:h,onClickCategoryLabel:p,onClickAddIcon:f,onClickCategoryDelete:v,setModal:Z}=e,{disabled:y,expanded:_,selected:C,focused:b,handleExpansion:k,handleSelection:N,preventSelection:P}=(0,x.Z)(o),[S,O]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:(0,w.Z)(i,t.root,{[t.expanded]:_,[t.selected]:C,[t.focused]:b,[t.disabled]:y}),onMouseDown:e=>{P(e)},ref:n,children:[(0,l.jsx)("div",{onClick:e=>{O(!S),k(e)},className:t.iconContainer,children:d||s?(0,l.jsx)(l.Fragment,{children:S?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(F.JO,{icon:"simple-line-icons:minus"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(g.Z,{title:"하위 카테고리를 확인하시려면 클릭해 주세요.",children:(0,l.jsx)(F.JO,{icon:"simple-line-icons:plus"})})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{width:"20px"}})})}),(0,l.jsx)(m.Z,{component:"div",className:t.label,style:{width:"".concat(200+10*parseInt(u),"px")},children:r}),(0,l.jsx)(g.Z,{title:"해당 카테고리를 수정하시려면 클릭해주세요.",children:(0,l.jsx)(j.Z,{onClick:()=>p(h,u),children:(0,l.jsx)(F.JO,{icon:"tabler:edit",fontSize:16})})}),(0,l.jsx)(g.Z,{title:"하위 카테고리를 추가하시려면 클릭해 주세요.",children:(0,l.jsx)(j.Z,{onClick:()=>{f(h,u)},children:(0,l.jsx)(F.JO,{icon:"uiw:plus",fontSize:14})})}),(0,l.jsx)(g.Z,{title:"해당 카테고리 및 하위 카테고리를 삭제하시려면 클릭해 주세요.",children:(0,l.jsx)(j.Z,{onClick:()=>{Z({func:()=>{v(h)},icon:"material-symbols:delete-outline",title:"정말 삭제하시겠습니까?"})},children:(0,l.jsx)(F.JO,{icon:"material-symbols:delete-outline",fontSize:16})})})]})});function L(e){return(0,l.jsx)(R,{ContentComponent:E,...e,ContentProps:e})}let X=o.ZP.div(S()),D=()=>{let{setModal:e}=(0,P.d)(),n={category_file:"",category_name:"",category_description:"",category_type:0},t=(0,b.u)(),[i,r]=(0,a.useState)(!0),[o,s]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[u,h]=(0,a.useState)(n),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{j()},[]);let j=async()=>{let e=await (0,N.Wr)({page:1,page_size:1e5});e&&s(null==e?void 0:e.content),r(!1)},w=(n,t)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(L,{nodeId:null==n?void 0:n.id,label:null==n?void 0:n.category_name,onClickCategoryLabel:S,onClickAddIcon:F,depth:t,category:n,onClickCategoryDelete:R,setModal:e,children:(null==n?void 0:n.children)&&(null==n?void 0:n.children.length)>0&&(0,l.jsx)(l.Fragment,{children:null==n?void 0:n.children.map((e,n)=>(0,l.jsx)(l.Fragment,{children:w(e,t+1)}))})})}),F=(e,t)=>{m(!0);let i=(0,k.XG)(o),l=[];for(var r,a=0;a<i.length;a++)if((null===(r=i[a][t])||void 0===r?void 0:r.id)==(null==e?void 0:e.id)){l=i[a];break}c(l),h({...n,parent_id:null==e?void 0:e.id,parent:e})},S=(e,n)=>{m(!0);let t=(0,k.XG)(o),i=[];for(var l,r=0;r<t.length;r++)if((null===(l=t[r][n])||void 0===l?void 0:l.id)==(null==e?void 0:e.id)){i=t[r];break}c(i),h(e)},R=async e=>{m(!1),await (0,N.KU)(e),m(!1),j()},E=async()=>{(null==u?void 0:u.id)?await (0,N.Co)({...u}):await (0,N.$W)({...u}),m(!1),j()};return(0,l.jsx)(l.Fragment,{children:!i&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(X,{children:(0,l.jsxs)(p.ZP,{container:!0,spacing:3,children:[(0,l.jsx)(p.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)(f.Z,{sx:{p:2,height:"100%"},children:o.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O,{defaultExpanded:["1"],style:{height:"auto"},children:o.map((e,n)=>(0,l.jsx)(l.Fragment,{children:w(e,0)}))}),(0,l.jsx)(g.Z,{title:"새로운 대분류 카테고리를 추가하시려면 클릭해주세요.",sx:{margin:"auto"},children:(0,l.jsx)(v.Z,{variant:"outlined",sx:{width:"316px",marginTop:"0.5rem"},onClick:()=>{m(!0),h(n),c([])},children:"대분류 카테고리 추가"})})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(_.X2,{style:{display:"flex",height:"100%",width:"100%",flexDirection:"column"},children:[(0,l.jsx)("div",{style:{margin:"auto auto 1rem auto"},children:"카테고리를 추가해 주세요."}),(0,l.jsx)(g.Z,{title:"새로운 대분류 카테고리를 추가하시려면 클릭해주세요.",sx:{margin:"auto"},children:(0,l.jsx)(v.Z,{variant:"outlined",sx:{width:"316px",margin:"0 auto auto auto"},onClick:()=>{m(!0),h(n),c([])},children:"대분류 카테고리 추가"})})]})})})}),(0,l.jsx)(p.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)(f.Z,{sx:{p:2,height:"100%"},children:(0,l.jsx)(Z.Z,{spacing:1,style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"700px"},children:x?(0,l.jsxs)(l.Fragment,{children:[((null==u?void 0:u.id)||(null==u?void 0:u.parent)||x)&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(_.X2,{children:[(0,l.jsx)(_.X2,{style:{color:t.palette.error.main,fontWeight:"bold"},children:d.map((e,n)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{marginRight:"0.25rem"},children:e.category_name}),n!=d.length-1&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{marginRight:"0.25rem"},children:">"})})]}))}),(null==u?void 0:u.id)&&(0,l.jsx)(l.Fragment,{children:"카테고리 수정"}),(null==u?void 0:u.parent)&&(0,l.jsx)(l.Fragment,{children:"의 하위 카테고리 추가"}),!(null==u?void 0:u.id)&&!(null==u?void 0:u.parent)&&(0,l.jsx)(l.Fragment,{children:"새로운 대분류 카테고리 추가"})]})}),(0,l.jsx)(C.Z,{file:u.category_file||u.category_img,onDrop:e=>{let n=e[0];n&&h({...u,category_file:Object.assign(n,{preview:URL.createObjectURL(n)})})},onDelete:()=>{h({...u,category_file:void 0,category_img:""})}}),(0,l.jsx)(y.Z,{label:"카테고리명",value:u.category_name,onChange:e=>{h({...u,category_name:e.target.value})}}),(0,l.jsx)(y.Z,{fullWidth:!0,label:"카테고리 설명",multiline:!0,rows:4,value:u.category_description,onChange:e=>{h({...u,category_description:e.target.value})}}),(0,l.jsx)(v.Z,{variant:"contained",style:{marginTop:"auto",height:"56px"},onClick:()=>{e({func:()=>{E()},icon:"material-symbols:edit-outline",title:"저장 하시겠습니까?"})},children:(null==u?void 0:u.id)>0?"수정":"추가"})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{margin:"auto"}})})})})})]})})})})};D.getLayout=e=>(0,l.jsx)(r.Z,{children:e}),n.default=D}},function(e){e.O(0,[1712,8265,7918,1907,153,135,2679,1664,8422,1868,1998,4258,3735,9474,6886,5898,2077,4294,6397,3033,2367,9774,2888,179],function(){return e(e.s=45475)}),_N_E=e.O()}]);