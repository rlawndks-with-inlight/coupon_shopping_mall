(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7125],{66242:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var i=t(87462),o=t(63366),l=t(67294),r=t(86010),a=t(94780),d=t(90948),c=t(71657),s=t(90629),u=t(1588),g=t(34867);function h(e){return(0,g.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var _=t(85893);let v=["className","raised"],m=e=>{let{classes:n}=e;return(0,a.Z)({root:["root"]},h,n)},x=(0,d.ZP)(s.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"})),p=l.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiCard"}),{className:l,raised:a=!1}=t,d=(0,o.Z)(t,v),s=(0,i.Z)({},t,{raised:a}),u=m(s);return(0,_.jsx)(x,(0,i.Z)({className:(0,r.Z)(u.root,l),elevation:a?8:void 0,ref:n,ownerState:s},d))});var j=p},29064:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/products/categories/[id]",function(){return t(63946)}])},63946:function(e,n,t){"use strict";t.r(n);var i=t(82729),o=t(85893),l=t(11466),r=t(67294),a=t(50066),d=t(90948),c=t(41796),s=t(4707),u=t(25254),g=t(4020),h=t(76409),_=t(34386),v=t(15861),m=t(93946),x=t(86886),p=t(66242),j=t(83321),y=t(26447),f=t(50135),Z=t(65631),w=t(82367),C=t(86010),F=t(1954),b=t(52443),k=t(17543),S=t(7295),O=t(11163),N=t(96486),P=t.n(N),z=t(49824);function J(){let e=(0,i._)(["\nwidth:100%;\ndisplay:flex;\n"]);return J=function(){return e},e}let R=(0,d.ZP)(s.Z)({height:240,flexGrow:1,maxWidth:400}),X=(0,d.ZP)(e=>(0,o.jsx)(u.Z,{...e}))(e=>{let{theme:n}=e;return{["& .".concat(g.Z.iconContainer)]:{"& .close":{opacity:.3},height:"auto"},["& .".concat(g.Z.group)]:{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,c.Fq)(n.palette.text.primary,.4))}}}),q=(0,r.forwardRef)(function(e,n){let{classes:t,className:i,label:l,nodeId:a,icon:d,expansionIcon:c,displayIcon:s,depth:u,category:g,onClickCategoryLabel:x,onChangeStatus:p,onClickAddIcon:j,onClickCategoryDelete:y,setModal:f,index:Z,category_length:w,onChangeSequence:b,categoryGroup:k}=e,{disabled:S,expanded:O,selected:N,focused:P,handleExpansion:z,handleSelection:J,preventSelection:R}=(0,h.Z)(a),[X,q]=(0,r.useState)(!1),E=(c||d)&&((null==k?void 0:k.max_depth)==-1||(null==k?void 0:k.max_depth)>u+1);return(0,o.jsxs)("div",{className:(0,C.Z)(i,t.root,{[t.expanded]:O,[t.selected]:N,[t.focused]:P,[t.disabled]:S}),onMouseDown:e=>{R(e)},ref:n,children:[(0,o.jsx)("div",{onClick:e=>{q(!X),z(e)},className:t.iconContainer,children:E?(0,o.jsx)(o.Fragment,{children:X?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(F.JO,{icon:"simple-line-icons:minus"})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(_.Z,{title:"하위 ".concat(null==k?void 0:k.category_group_name,"를 확인하시려면 클릭해 주세요."),children:(0,o.jsx)(F.JO,{icon:"simple-line-icons:plus"})})})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{style:{width:"".concat(u>0?"20px":"")}})})}),(0,o.jsx)(v.Z,{component:"div",className:t.label,style:{width:"".concat(200+10*parseInt(u),"px")},children:l}),(null==k?void 0:k.is_show_header_menu)==1&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(_.Z,{title:"해당 ".concat(null==k?void 0:k.category_group_name,"을(를) 헤더메뉴에 노출 ").concat((null==g?void 0:g.is_show_header_menu)==0?"안":""," 하시려면 클릭해주세요."),children:(0,o.jsx)(m.Z,{onClick:()=>p("is_show_header_menu",null==g?void 0:g.id,(null==g?void 0:g.is_show_header_menu)==0?1:0),children:(0,o.jsx)(F.JO,{icon:"iconoir:star-solid",fontSize:18,style:{color:"".concat((null==g?void 0:g.is_show_header_menu)==1?"rgb(250, 175, 0)":"rgba(145, 158, 171, 0.48)")}})})})}),(0,o.jsx)(_.Z,{title:"해당 ".concat(null==k?void 0:k.category_group_name,"을(를) 수정하시려면 클릭해주세요."),children:(0,o.jsx)(m.Z,{onClick:()=>x(g,u),children:(0,o.jsx)(F.JO,{icon:"tabler:edit",fontSize:16})})}),(0,o.jsx)(_.Z,{title:"해당 ".concat(null==k?void 0:k.category_group_name,"을(를) 노출 ").concat((null==g?void 0:g.status)==0?"안":""," 하시려면 클릭해주세요."),children:(0,o.jsx)(m.Z,{onClick:()=>p("status",null==g?void 0:g.id,(null==g?void 0:g.status)==0?1:0),children:(0,o.jsx)(F.JO,{icon:(null==g?void 0:g.status)==0?"mdi:eye-outline":"mdi:eye-off-outline",fontSize:18})})}),((null==k?void 0:k.max_depth)==-1||(null==k?void 0:k.max_depth)>u+1)&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(_.Z,{title:"하위 ".concat(null==k?void 0:k.category_group_name,"를 추가하시려면 클릭해 주세요."),children:(0,o.jsx)(m.Z,{onClick:()=>{j(g,u)},children:(0,o.jsx)(F.JO,{icon:"uiw:plus",fontSize:14})})})}),(null==k?void 0:k.sort_type)==0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.Z,{title:"해당 ".concat(null==k?void 0:k.category_group_name,"을(를) 한칸 올리시려면 클릭해 주세요."),children:(0,o.jsx)(m.Z,{sx:{padding:"0.25rem"},disabled:0==Z,onClick:()=>{b(!0,g,u,Z)},children:(0,o.jsx)(F.JO,{icon:"grommet-icons:link-up",fontSize:14})})}),(0,o.jsx)(_.Z,{title:"해당 ".concat(null==k?void 0:k.category_group_name,"을(를) 한칸 내리시려면 클릭해 주세요."),children:(0,o.jsx)(m.Z,{sx:{padding:"0.25rem"},disabled:Z==w-1,onClick:()=>{b(!1,g,u,Z)},children:(0,o.jsx)(F.JO,{icon:"grommet-icons:link-down",fontSize:14})})})]}),(0,o.jsx)(_.Z,{title:"해당 ".concat(null==k?void 0:k.category_group_name," 및 하위 ").concat(null==k?void 0:k.category_group_name,"을(를) 삭제하시려면 클릭해 주세요."),children:(0,o.jsx)(m.Z,{onClick:()=>{f({func:()=>{y(g)},icon:"material-symbols:delete-outline",title:"정말 삭제하시겠습니까?"})},children:(0,o.jsx)(F.JO,{icon:"material-symbols:delete-outline",fontSize:16})})})]})});function E(e){return(0,o.jsx)(X,{ContentComponent:q,...e,ContentProps:e})}let L=a.ZP.div(J()),D=()=>{var e;let{setModal:n}=(0,S.d)(),t={category_file:"",category_name:"",category_en_name:"",category_description:"",category_type:0,status:0},i=(0,b.u)(),l=(0,O.useRouter)(),[a,d]=(0,r.useState)(!0),[c,s]=(0,r.useState)([]),[u,g]=(0,r.useState)([]),[h,v]=(0,r.useState)(t),[m,C]=(0,r.useState)(!1),[F,N]=(0,r.useState)({});(0,r.useEffect)(()=>{J(),X()},[null===(e=l.query)||void 0===e?void 0:e.id]);let J=async()=>{var e,n;let t=await (0,z.fp)("product-category-groups","list",{page:1,page_size:1e5});t=null!==(n=null==t?void 0:t.content)&&void 0!==n?n:[];let i=P().find(t,{id:parseInt(null===(e=l.query)||void 0===e?void 0:e.id)});i&&N(i)},X=async()=>{var e;C(!1),v(t);let n=await (0,z.fp)("product-categories","list",{page:1,page_size:1e5,product_category_group_id:null===(e=l.query)||void 0===e?void 0:e.id});n&&s(null==n?void 0:n.content),d(!1)},q=(e,t,i,l)=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(E,{nodeId:null==e?void 0:e.id,label:null==e?void 0:e.category_name,onClickCategoryLabel:I,onChangeStatus:G,onClickAddIcon:M,depth:t,category:e,onClickCategoryDelete:T,setModal:n,index:i,category_length:l,onChangeSequence:D,categoryGroup:F,children:(null==e?void 0:e.children)&&(null==e?void 0:e.children.length)>0&&(0,o.jsx)(o.Fragment,{children:null==e?void 0:e.children.map((n,i)=>(0,o.jsx)(o.Fragment,{children:q(n,t+1,i,null==e?void 0:e.children.length)}))})})}),D=async(e,n,t,i)=>{let o=(0,k.XG)(c),l=[];for(var r,a,d,s,u,g,h,_=0;_<o.length;_++)if((null===(r=o[_][t])||void 0===r?void 0:r.id)==(null==n?void 0:n.id)){l=o[_];break}let v={source_id:-1,source_sort_idx:-1,dest_id:-1,dest_sort_idx:-1},m=e?"dest":"source",x=e?"source":"dest";v["".concat(m,"_id")]=null==n?void 0:n.id,v["".concat(m,"_sort_idx")]=null==n?void 0:n.sort_idx,l.length>1?(v["".concat(x,"_id")]=null===(a=null===(d=l[t-1])||void 0===d?void 0:d.children[i+(e?-1:1)])||void 0===a?void 0:a.id,v["".concat(x,"_sort_idx")]=null===(s=null===(u=l[t-1])||void 0===u?void 0:u.children[i+(e?-1:1)])||void 0===s?void 0:s.sort_idx):(v["".concat(x,"_id")]=null===(g=c[i+(e?-1:1)])||void 0===g?void 0:g.id,v["".concat(x,"_sort_idx")]=null===(h=c[i+(e?-1:1)])||void 0===h?void 0:h.sort_idx),await (0,z.fp)("util/product_categories/sort","create",v)&&X()},M=(e,n)=>{C(!0);let i=(0,k.XG)(c),o=[];for(var l,r=0;r<i.length;r++)if((null===(l=i[r][n])||void 0===l?void 0:l.id)==(null==e?void 0:e.id)){o=i[r];break}g(o),v({...t,parent_id:null==e?void 0:e.id,parent:e})},G=async(e,n,t)=>{await (0,z.fp)("util/product_categories/".concat(e),"create",{id:n,value:t}),X()},I=(e,n)=>{C(!0);let t=(0,k.XG)(c),i=[];for(var o,l=0;l<t.length;l++)if((null===(o=t[l][n])||void 0===o?void 0:o.id)==(null==e?void 0:e.id)){i=t[l];break}g(i),v(e)},T=async e=>{C(!1),await (0,z.fp)("product-categories","delete",e),C(!1),X()},W=async()=>{var e,n;(null==h?void 0:h.id)?await (0,z.fp)("product-categories","update",{...h,product_category_group_id:null===(e=l.query)||void 0===e?void 0:e.id}):await (0,z.fp)("product-categories","create",{...h,product_category_group_id:null===(n=l.query)||void 0===n?void 0:n.id}),C(!1),X()};return(0,o.jsx)(o.Fragment,{children:!a&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(L,{children:(0,o.jsxs)(x.ZP,{container:!0,spacing:3,children:[(0,o.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,o.jsx)(p.Z,{sx:{p:2,height:"100%"},children:c.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R,{defaultExpanded:["1"],style:{height:"auto"},children:c.map((e,n)=>(0,o.jsx)(o.Fragment,{children:q(e,0,n,c.length)}))}),(0,o.jsx)(_.Z,{title:"새로운 대분류 ".concat(null==F?void 0:F.category_group_name,"를 추가하시려면 클릭해주세요."),sx:{margin:"auto"},children:(0,o.jsxs)(j.Z,{variant:"outlined",sx:{width:"316px",marginTop:"0.5rem"},onClick:()=>{C(!0),v(t),g([])},children:["대분류 ",null==F?void 0:F.category_group_name," 추가"]})})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Z.X2,{style:{display:"flex",height:"100%",width:"100%",flexDirection:"column"},children:[(0,o.jsxs)("div",{style:{margin:"auto auto 1rem auto"},children:[null==F?void 0:F.category_group_name,"를 추가해 주세요."]}),(0,o.jsx)(_.Z,{title:"새로운 대분류 ".concat(null==F?void 0:F.category_group_name,"를 추가하시려면 클릭해주세요."),sx:{margin:"auto"},children:(0,o.jsxs)(j.Z,{variant:"outlined",sx:{width:"316px",margin:"0 auto auto auto"},onClick:()=>{C(!0),v(t),g([])},children:["대분류 ",null==F?void 0:F.category_group_name," 추가"]})})]})})})}),(0,o.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,o.jsx)(p.Z,{sx:{p:2,height:"100%"},children:(0,o.jsx)(y.Z,{spacing:1,style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"700px"},children:m?(0,o.jsxs)(o.Fragment,{children:[((null==h?void 0:h.id)||(null==h?void 0:h.parent)||m)&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Z.X2,{children:[(0,o.jsx)(Z.X2,{style:{color:i.palette.error.main,fontWeight:"bold"},children:u.map((e,n)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{marginRight:"0.25rem"},children:e.category_name}),n!=u.length-1&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{style:{marginRight:"0.25rem"},children:">"})})]}))}),(null==h?void 0:h.id)&&(0,o.jsxs)(o.Fragment,{children:[null==F?void 0:F.category_group_name," 수정"]}),(null==h?void 0:h.parent)&&(0,o.jsxs)(o.Fragment,{children:["의 하위 ",null==F?void 0:F.category_group_name," 추가"]}),!(null==h?void 0:h.id)&&!(null==h?void 0:h.parent)&&(0,o.jsxs)(o.Fragment,{children:["새로운 대분류 ",null==F?void 0:F.category_group_name," 추가"]})]})}),(0,o.jsx)(w.Z,{file:h.category_file||h.category_img,onDrop:e=>{let n=e[0];n&&v({...h,category_file:Object.assign(n,{preview:URL.createObjectURL(n)})})},onDelete:()=>{v({...h,category_file:void 0,category_img:""})}}),(0,o.jsx)(f.Z,{label:"".concat(null==F?void 0:F.category_group_name,"명"),value:h.category_name,onChange:e=>{v({...h,category_name:e.target.value})}}),(null==F?void 0:F.is_use_en_name)==1&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(f.Z,{label:"".concat(null==F?void 0:F.category_group_name," 영문명"),value:h.category_en_name,onChange:e=>{v({...h,category_en_name:e.target.value})}})}),(0,o.jsx)(f.Z,{fullWidth:!0,label:"".concat(null==F?void 0:F.category_group_name," 설명"),multiline:!0,rows:4,value:h.category_description,onChange:e=>{v({...h,category_description:e.target.value})}}),(0,o.jsx)(j.Z,{variant:"contained",style:{marginTop:"auto",height:"56px"},onClick:()=>{n({func:()=>{W()},icon:"material-symbols:edit-outline",title:"저장 하시겠습니까?"})},children:(null==h?void 0:h.id)>0?"수정":"추가"})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{style:{margin:"auto"}})})})})})]})})})})};D.getLayout=e=>(0,o.jsx)(l.Z,{children:e}),n.default=D},67122:function(e,n,t){"use strict";t.d(n,{FK:function(){return l},e_:function(){return r},oe:function(){return d},v1:function(){return a}});var i=t(92077),o=t.n(i);function l(e){return o()(e).format()}function r(e){let n=e?o()(e).format("0,0.00"):"";return c(n,".00")}function a(e){let n=e?o()(e).format("0.00a"):"";return c(n,".00")}function d(e){let n=e?o()(e).format("0.0 b"):"";return c(n,".0")}function c(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".00",t=e.includes(n);return t?e.replace(n,""):e}}},function(e){e.O(0,[3662,3548,8203,9421,5422,153,135,6886,1664,7273,8422,7422,2961,7720,5898,2077,2519,9456,1466,2367,9774,2888,179],function(){return e(e.s=29064)}),_N_E=e.O()}]);