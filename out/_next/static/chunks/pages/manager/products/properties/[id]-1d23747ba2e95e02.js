(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2703],{66242:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(87462),r=n(63366),o=n(67294),l=n(86010),d=n(94780),a=n(90948),u=n(71657),c=n(90629),s=n(1588),p=n(34867);function h(e){return(0,p.Z)("MuiCard",e)}(0,s.Z)("MuiCard",["root"]);var v=n(85893);let x=["className","raised"],m=e=>{let{classes:t}=e;return(0,d.Z)({root:["root"]},h,t)},_=(0,a.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),g=o.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiCard"}),{className:o,raised:d=!1}=n,a=(0,r.Z)(n,x),c=(0,i.Z)({},n,{raised:d}),s=m(c);return(0,v.jsx)(_,(0,i.Z)({className:(0,l.Z)(s.root,o),elevation:d?8:void 0,ref:t,ownerState:c},a))});var f=g},94121:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/products/properties/[id]",function(){return n(16752)}])},16752:function(e,t,n){"use strict";n.r(t);var i=n(82729),r=n(85893),o=n(11466),l=n(67294),d=n(50066),a=n(90948),u=n(41796),c=n(4707),s=n(25254),p=n(4020),h=n(76409),v=n(15861),x=n(34386),m=n(93946),_=n(86886),g=n(66242),f=n(83321),y=n(26447),j=n(50135),Z=n(65631),w=n(82367),C=n(86010),b=n(1954),k=n(52443),F=n(17543),S=n(7295),P=n(11163),N=n(96486),O=n.n(N),R=n(49824);function X(){let e=(0,i._)(["\nwidth:100%;\ndisplay:flex;\n"]);return X=function(){return e},e}let q=(0,a.ZP)(c.Z)({height:240,flexGrow:1,maxWidth:400}),z=(0,a.ZP)(e=>(0,r.jsx)(s.Z,{...e}))(e=>{let{theme:t}=e;return{["& .".concat(p.Z.iconContainer)]:{"& .close":{opacity:.3},height:"auto"},["& .".concat(p.Z.group)]:{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,u.Fq)(t.palette.text.primary,.4))}}}),E=(0,l.forwardRef)(function(e,t){let{classes:n,className:i,label:o,nodeId:d,icon:a,expansionIcon:u,displayIcon:c,depth:s,property:p,onClickPropertyLabel:_,onChangeStatus:g,onClickAddIcon:f,onClickPropertyDelete:y,setModal:j,index:Z,property_length:w,onChangeSequence:k,propertyGroup:F}=e,{disabled:S,expanded:P,selected:N,focused:O,handleExpansion:R,handleSelection:X,preventSelection:q}=(0,h.Z)(d),[z,E]=(0,l.useState)(!1);return(u||a)&&((null==F?void 0:F.max_depth)==-1||null==F||F.max_depth),(0,r.jsxs)("div",{className:(0,C.Z)(i,n.root,{[n.expanded]:P,[n.selected]:N,[n.focused]:O,[n.disabled]:S}),onMouseDown:e=>{q(e)},ref:t,children:[(0,r.jsx)(v.Z,{component:"div",className:n.label,style:{width:"".concat(200+10*parseInt(s),"px")},children:o}),(0,r.jsx)(x.Z,{title:"해당 ".concat(null==F?void 0:F.property_group_name,"을(를) 수정하시려면 클릭해주세요."),children:(0,r.jsx)(m.Z,{onClick:()=>_(p,s),children:(0,r.jsx)(b.JO,{icon:"tabler:edit",fontSize:16})})}),(0,r.jsx)(x.Z,{title:"해당 ".concat(null==F?void 0:F.property_group_name,"을(를) 노출 ").concat((null==p?void 0:p.status)==0?"안":""," 하시려면 클릭해주세요."),children:(0,r.jsx)(m.Z,{onClick:()=>g("status",null==p?void 0:p.id,(null==p?void 0:p.status)==0?1:0),children:(0,r.jsx)(b.JO,{icon:(null==p?void 0:p.status)==0?"mdi:eye-outline":"mdi:eye-off-outline",fontSize:18})})}),(0,r.jsx)(x.Z,{title:"해당 ".concat(null==F?void 0:F.property_group_name,"을(를) 한칸 올리시려면 클릭해 주세요."),children:(0,r.jsx)(m.Z,{sx:{padding:"0.25rem"},disabled:0==Z,onClick:()=>{k(!0,p,s,Z)},children:(0,r.jsx)(b.JO,{icon:"grommet-icons:link-up",fontSize:14})})}),(0,r.jsx)(x.Z,{title:"해당 ".concat(null==F?void 0:F.property_group_name,"을(를) 한칸 내리시려면 클릭해 주세요."),children:(0,r.jsx)(m.Z,{sx:{padding:"0.25rem"},disabled:Z==w-1,onClick:()=>{k(!1,p,s,Z)},children:(0,r.jsx)(b.JO,{icon:"grommet-icons:link-down",fontSize:14})})}),(0,r.jsx)(x.Z,{title:"해당 ".concat(null==F?void 0:F.property_group_name,"을(를) 삭제하시려면 클릭해 주세요."),children:(0,r.jsx)(m.Z,{onClick:()=>{j({func:()=>{y(p)},icon:"material-symbols:delete-outline",title:"정말 삭제하시겠습니까?"})},children:(0,r.jsx)(b.JO,{icon:"material-symbols:delete-outline",fontSize:16})})})]})});function L(e){return(0,r.jsx)(z,{ContentComponent:E,...e,ContentProps:e})}let D=d.ZP.div(X()),M=()=>{var e;let{setModal:t}=(0,S.d)(),n={property_file:"",property_name:"",property_description:"",property_type:0},i=(0,k.u)(),o=(0,P.useRouter)(),[d,a]=(0,l.useState)(!0),[u,c]=(0,l.useState)([]),[s,p]=(0,l.useState)([]),[h,v]=(0,l.useState)(n),[m,C]=(0,l.useState)(!1),[b,N]=(0,l.useState)({});(0,l.useEffect)(()=>{X(),z()},[null===(e=o.query)||void 0===e?void 0:e.id]);let X=async()=>{var e,t;let n=await (0,R.fp)("product-property-groups","list",{page:1,page_size:1e5});n=null!==(t=null==n?void 0:n.content)&&void 0!==t?t:[];let i=O().find(n,{id:parseInt(null===(e=o.query)||void 0===e?void 0:e.id)});i&&N(i)},z=async()=>{var e;C(!1),v(n);let t=await (0,R.fp)("product-properties","list",{page:1,page_size:1e5,product_property_group_id:null===(e=o.query)||void 0===e?void 0:e.id});t&&c(null==t?void 0:t.content),a(!1)},E=(e,n,i,o)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(L,{nodeId:null==e?void 0:e.id,label:null==e?void 0:e.property_name,onClickPropertyLabel:I,onChangeStatus:J,onClickAddIcon:G,depth:n,property:e,onClickPropertyDelete:T,setModal:t,index:i,property_length:o,onChangeSequence:M,propertyGroup:b,children:(null==e?void 0:e.children)&&(null==e?void 0:e.children.length)>0&&(0,r.jsx)(r.Fragment,{children:null==e?void 0:e.children.map((t,i)=>(0,r.jsx)(r.Fragment,{children:E(t,n+1,i,null==e?void 0:e.children.length)}))})})}),M=async(e,t,n,i)=>{let r=(0,F.XG)(u),o=[];for(var l,d,a,c,s,p,h,v=0;v<r.length;v++)if((null===(l=r[v][n])||void 0===l?void 0:l.id)==(null==t?void 0:t.id)){o=r[v];break}let x={source_id:-1,source_sort_idx:-1,dest_id:-1,dest_sort_idx:-1},m=e?"dest":"source",_=e?"source":"dest";x["".concat(m,"_id")]=null==t?void 0:t.id,x["".concat(m,"_sort_idx")]=null==t?void 0:t.sort_idx,o.length>1?(x["".concat(_,"_id")]=null===(d=null===(a=o[n-1])||void 0===a?void 0:a.children[i+(e?-1:1)])||void 0===d?void 0:d.id,x["".concat(_,"_sort_idx")]=null===(c=null===(s=o[n-1])||void 0===s?void 0:s.children[i+(e?-1:1)])||void 0===c?void 0:c.sort_idx):(x["".concat(_,"_id")]=null===(p=u[i+(e?-1:1)])||void 0===p?void 0:p.id,x["".concat(_,"_sort_idx")]=null===(h=u[i+(e?-1:1)])||void 0===h?void 0:h.sort_idx),await (0,R.fp)("util/product_properties/sort","create",x)&&z()},G=(e,t)=>{C(!0);let i=(0,F.XG)(u),r=[];for(var o,l=0;l<i.length;l++)if((null===(o=i[l][t])||void 0===o?void 0:o.id)==(null==e?void 0:e.id)){r=i[l];break}p(r),v({...n,parent_id:null==e?void 0:e.id,parent:e})},J=async(e,t,n)=>{await (0,R.fp)("util/product_properties/".concat(e),"create",{id:t,value:n}),z()},I=(e,t)=>{C(!0);let n=(0,F.XG)(u),i=[];for(var r,o=0;o<n.length;o++)if((null===(r=n[o][t])||void 0===r?void 0:r.id)==(null==e?void 0:e.id)){i=n[o];break}p(i),v(e)},T=async e=>{C(!1),await (0,R.fp)("product-properties","delete",e),C(!1),z()},W=async()=>{var e,t;(null==h?void 0:h.id)?await (0,R.fp)("product-properties","update",{...h,product_property_group_id:null===(e=o.query)||void 0===e?void 0:e.id}):await (0,R.fp)("product-properties","create",{...h,product_property_group_id:null===(t=o.query)||void 0===t?void 0:t.id}),C(!1),z()};return(0,r.jsx)(r.Fragment,{children:!d&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(D,{children:(0,r.jsxs)(_.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(_.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(g.Z,{sx:{p:2,height:"100%"},children:u.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{defaultExpanded:["1"],style:{height:"auto"},children:u.map((e,t)=>(0,r.jsx)(r.Fragment,{children:E(e,0,t,u.length)}))}),(0,r.jsx)(x.Z,{title:"새로운 ".concat(null==b?void 0:b.property_group_name,"를 추가하시려면 클릭해주세요."),sx:{margin:"auto"},children:(0,r.jsxs)(f.Z,{variant:"outlined",sx:{width:"316px",marginTop:"0.5rem"},onClick:()=>{C(!0),v(n),p([])},children:[null==b?void 0:b.property_group_name," 추가"]})})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Z.X2,{style:{display:"flex",height:"100%",width:"100%",flexDirection:"column"},children:[(0,r.jsxs)("div",{style:{margin:"auto auto 1rem auto"},children:[null==b?void 0:b.property_group_name,"를 추가해 주세요."]}),(0,r.jsx)(x.Z,{title:"새로운  ".concat(null==b?void 0:b.property_group_name,"를 추가하시려면 클릭해주세요."),sx:{margin:"auto"},children:(0,r.jsxs)(f.Z,{variant:"outlined",sx:{width:"316px",margin:"0 auto auto auto"},onClick:()=>{C(!0),v(n),p([])},children:[null==b?void 0:b.property_group_name," 추가"]})})]})})})}),(0,r.jsx)(_.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(g.Z,{sx:{p:2,height:"100%"},children:(0,r.jsx)(y.Z,{spacing:1,style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"700px"},children:m?(0,r.jsxs)(r.Fragment,{children:[((null==h?void 0:h.id)||(null==h?void 0:h.parent)||m)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Z.X2,{children:[(0,r.jsx)(Z.X2,{style:{color:i.palette.error.main,fontWeight:"bold"},children:s.map((e,t)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginRight:"0.25rem"},children:e.property_name}),t!=s.length-1&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{marginRight:"0.25rem"},children:">"})})]}))}),(null==h?void 0:h.id)&&(0,r.jsxs)(r.Fragment,{children:[null==b?void 0:b.property_group_name," 수정"]}),!(null==h?void 0:h.id)&&!(null==h?void 0:h.parent)&&(0,r.jsxs)(r.Fragment,{children:["새로운 ",null==b?void 0:b.property_group_name," 추가"]})]})}),(0,r.jsx)(w.Z,{file:h.property_file||h.property_img,onDrop:e=>{let t=e[0];t&&v({...h,property_file:Object.assign(t,{preview:URL.createObjectURL(t)})})},onDelete:()=>{v({...h,property_file:void 0,property_img:""})}}),(0,r.jsx)(j.Z,{label:"".concat(null==b?void 0:b.property_group_name,"명"),value:h.property_name,onChange:e=>{v({...h,property_name:e.target.value})}}),(0,r.jsx)(j.Z,{fullWidth:!0,label:"".concat(null==b?void 0:b.property_group_name," 설명"),multiline:!0,rows:4,value:h.property_description,onChange:e=>{v({...h,property_description:e.target.value})}}),(0,r.jsx)(f.Z,{variant:"contained",style:{marginTop:"auto",height:"56px"},onClick:()=>{t({func:()=>{W()},icon:"material-symbols:edit-outline",title:"저장 하시겠습니까?"})},children:(null==h?void 0:h.id)>0?"수정":"추가"})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{margin:"auto"}})})})})})]})})})})};M.getLayout=e=>(0,r.jsx)(o.Z,{children:e}),t.default=M},67122:function(e,t,n){"use strict";n.d(t,{FK:function(){return o},e_:function(){return l},oe:function(){return a},v1:function(){return d}});var i=n(92077),r=n.n(i);function o(e){return r()(e).format()}function l(e){let t=e?r()(e).format("0,0.00"):"";return u(t,".00")}function d(e){let t=e?r()(e).format("0.00a"):"";return u(t,".00")}function a(e){let t=e?r()(e).format("0.0 b"):"";return u(t,".0")}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".00",n=e.includes(t);return n?e.replace(t,""):e}}},function(e){e.O(0,[3662,3548,8203,9421,5422,153,135,6886,1664,7273,8422,7422,2961,7720,5898,2077,2519,9456,1466,2367,9774,2888,179],function(){return e(e.s=94121)}),_N_E=e.O()}]);